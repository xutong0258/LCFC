import{a as c}from"./utils-ngrFHoWO.js";import{E as n}from"./element-plus-BXkjHCnf.js";const i=c.create({baseURL:"https://api.example.com",timeout:1e4});i.interceptors.request.use(e=>{const r=localStorage.getItem("token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMSIsInVzZXJfbmFtZSI6ImFkbWluIiwiZGVwdF9uYW1lIjoiXHU3ODE0XHU1M2QxXHU5MGU4XHU5NWU4Iiwic2Vzc2lvbl9pZCI6Ijc5ODFiMDdmLTAzZjMtNGY1MC04ODA4LWNlYTVlNmRlOGUzNiIsImxvZ2luX2luZm8iOm51bGwsImV4cCI6MjAxOTczNzU3N30.Gc3JPHkw3MmLvqd6meRRusCoN7l_l-dOnB5djNE3EG0";return e.headers=e.headers||{},e.headers.Authorization=`Bearer ${r}`,e},e=>(console.error("Request error:",e),Promise.reject(e)));i.interceptors.response.use(e=>{const{code:r,message:s,data:t}=e.data;return r===200?e.data:(n.error(s||"请求失败"),Promise.reject(new Error(s||"请求失败")))},e=>(console.error("Response error:",e),e.response?.status===401?n.error("登录已过期，请重新登录"):n.error(e.message||"网络错误"),Promise.reject(e)));function a(e){const{loading:r}=e;return new Promise((s,t)=>{i.request(e).then(o=>{s(o)}).catch(o=>{t(o)}).finally(()=>{r&&axiosLoading.closeLoading()})})}function l(e,r,s){const t={url:e,params:r,method:"GET",...s};return a(t)}function I(e,r,s){const t={url:e,data:r,method:"POST",...s};return a(t)}export{I as a,l as u};
//# sourceMappingURL=request-DqZZIVBd.js.map
